<div class="sitemangecontainer">
  <div class="wrap">
    <!-- 0.857 -->
    <header (click)="gohome($event)" class="header" id="header"
      style="background: url(../../../assets/picture/top.png) no-repeat center">
      现地COPQ管理
    </header>
    <!-- 0.625 -->
    <section>
      <div class="line"></div>
      <div class="selec">
        <div>
          <label>日期:
            <p-calendar [(ngModel)]="date" [ngModelOptions]="{ standalone: true }" view="month" [locale]="cn"
              [yearNavigator]="true" yearRange="2000:2030" dateFormat="yy-mm" [readonlyInput]="true"
              inputId="monthpicker">
            </p-calendar>
          </label>
          <label>现地:</label>
          <p-dropdown [options]="siteName" [(ngModel)]="selectedSite"></p-dropdown>
        </div>
        <p-button label="查询" (onClick)="queryClickMethod()" style="float: right"></p-button>
      </div>
    </section>
    <section>
      <div class="sitemange-trend" style="height: 5.385rem;">
        <div class="echart1" echarts [options]="option2" [theme]="echartTheme"></div>
      </div>
      <div class="sitemange-detail" style="height: 6rem;">
        <div class="detail-echart">
          <div class="detail-item">
            <div class="item echart2" echarts [options]="option3" [theme]="echartTheme"></div>
            <div class="item">
              <div class="items">
                <div class="panel top" style="
                    background: url(../../../assets/picture/Panel.png) no-repeat
                      center;
                  ">
                  内失
                </div>
                <div class="echart2 down" echarts [options]="option6" [theme]="echartTheme"></div>
              </div>
              <div class="items">
                <div class="module top" style="
                    background: url(../../../assets/picture/Module.png)
                      no-repeat center;
                  ">
                  外失
                </div>
                <div class="echart2 down" echarts [options]="option7" [theme]="echartTheme"></div>
              </div>
            </div>
          </div>
          <div class="detail-item" style="align-items: flex-start; padding: 5px 5px 0 0 ">
            <p-table [columns]="detailCols" [value]="DetailTrendData" [scrollable]="true" scrollHeight="5rem">
              <ng-template pTemplate="header" let-columns>
                <tr class="headTr">
                  <th class="td" colspan="3">日期</th>
                  <th class="td" *ngFor="let col of columns">
                    {{ col.header }}
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowData let-columns="columns" let-idx="rowIndex">
                <tr class="bodyTr bodyBackground">
                  <td class="td" *ngIf="idx === 3" [attr.rowspan]="6">内失</td>
                  <td class="td" *ngIf="idx === 9" [attr.rowspan]="9">外失</td>
                  <td [attr.colspan]="detailTable[idx].col" [attr.rowspan]="detailTable[idx].row">
                    {{ detailTable[idx].name }}
                  </td>
                  <td class="td" *ngFor="let col of columns">
                    {{ rowData[col.field] }}
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>